{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function axiosImages(userRequest, page, perPage) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '48923193-3438f3437d6b65fcb88350802',\n        q: `${userRequest}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    alert(error);\n    error => console.log(error);\n  }\n}\n","const gallery = document.querySelector('.list-images');\nexport function renderImages(images) {\n  const markup = images\n    .map(item => {\n      return `<li>\n    <a class='gallery-link' href='${item.largeImageURL}'>\n    <img class='gallery-img' src='${item.webformatURL}' alt='${item.tags}'>\n    <div class='image-info-block'>\n    <p class='image-info-parametr'>\n    <span class='image-name-parametr'>Likes</span>\n    <span class='image-value-parametr'>${item.likes}</span>\n    </p>\n    <p class='image-info-parametr'>\n    <span class='image-name-parametr'>Views</span>\n    <span class='image-value-parametr'>${item.views}</span>\n    </p>\n    <p class='image-info-parametr'>\n    <span class='image-name-parametr'>Comments</span>\n    <span class='image-value-parametr'>${item.comments}</span>\n    </p>\n    <p class='image-info-parametr'>\n    <span class='image-name-parametr'>Downloads</span>\n    <span class='image-value-parametr'>${item.downloads}</span>\n    </p>\n    </div>\n    </a>\n    </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import { axiosImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('.input-form');\nconst listImages = document.querySelector('.list-images');\nconst loader = document.querySelector('.loader');\nconst buttonMore = document.querySelector('.button-more');\n\nlet page = 1;\nconst perPage = 40;\nlet gallery = new SimpleLightbox('.list-images a');\ngallery.on('show.simplelightbox', function () {});\n\nform.addEventListener('submit', async evt => {\n  evt.preventDefault();\n  input.blur();\n  if (!input.value.trim()) return;\n\n  clearListImages();\n  fetchAndRenderImages(input.value, true);\n});\n\nbuttonMore.addEventListener('click', async () => {\n  page++;\n  fetchAndRenderImages(input.value, false);\n});\n\nasync function fetchAndRenderImages(searchQuery, isNewSearch) {\n  toggleLoader(true);\n  toggleButtonMore(false);\n\n  const { hits, totalHits } = await axiosImages(searchQuery, page, perPage);\n  toggleLoader(false);\n\n  if (!hits?.length) {\n    showNotification(\n      'Sorry, there are no images matching your search query. Please try again!',\n      '#ef4040'\n    );\n    return;\n  }\n\n  listImages.classList.remove('visually-hidden');\n  renderImages(hits);\n  gallery.refresh();\n\n  if (isLastPage(totalHits)) {\n    showNotification(\n      \"We're sorry, but you've reached the end of search results.\",\n      'green'\n    );\n  } else {\n    buttonMore.classList.remove('visually-hidden');\n  }\n  if (!isNewSearch) scrollPage();\n}\n\nfunction toggleLoader(state) {\n  loader.classList.toggle('is-active', state);\n}\n\nfunction clearListImages() {\n  return (listImages.innerHTML = '');\n}\n\nfunction isLastPage(totalHits) {\n  const totalPages = Math.ceil(totalHits / perPage);\n  return totalPages === page;\n}\n\nfunction showNotification(message, color) {\n  iziToast.show({\n    message,\n    position: 'topRight',\n    backgroundColor: color,\n    messageColor: '#fafafb',\n    messageSize: '16',\n  });\n}\n\nfunction scrollPage() {\n  const cardHeight =\n    document.querySelector('li')?.getBoundingClientRect().height || 0;\n  window.scrollBy({\n    top: cardHeight * 2 + 72,\n    behavior: 'smooth',\n  });\n}\n\nfunction toggleButtonMore(state) {\n  buttonMore.classList.toggle('visually-hidden', !state);\n}\n"],"names":["axiosImages","userRequest","page","perPage","axios","error","gallery","renderImages","images","markup","item","form","input","listImages","loader","buttonMore","SimpleLightbox","evt","clearListImages","fetchAndRenderImages","searchQuery","isNewSearch","toggleLoader","toggleButtonMore","hits","totalHits","showNotification","isLastPage","scrollPage","state","message","color","iziToast","cardHeight","_a"],"mappings":"owBAEO,eAAeA,EAAYC,EAAaC,EAAMC,EAAS,CAC5D,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAG,GAAGH,CAAW,GACjB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAMD,CACP,CACP,CAAK,GAEe,IACjB,OAAQG,EAAO,CACd,MAAMA,CAAK,CAEZ,CACH,CCrBA,MAAMC,EAAU,SAAS,cAAc,cAAc,EAC9C,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,oCACuBA,EAAK,aAAa;AAAA,oCAClBA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,yCAI/BA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,yCAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,yCAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,yCAIbA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,UAKlD,EACA,KAAK,EAAE,EACVJ,EAAQ,mBAAmB,YAAaG,CAAM,CAChD,CCvBA,MAAME,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIb,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIG,EAAU,IAAIU,EAAe,gBAAgB,EACjDV,EAAQ,GAAG,sBAAuB,UAAY,CAAA,CAAE,EAEhDK,EAAK,iBAAiB,SAAU,MAAMM,GAAO,CAC3CA,EAAI,eAAc,EAClBL,EAAM,KAAI,EACLA,EAAM,MAAM,KAAM,IAEvBM,IACAC,EAAqBP,EAAM,MAAO,EAAI,EACxC,CAAC,EAEDG,EAAW,iBAAiB,QAAS,SAAY,CAC/Cb,IACAiB,EAAqBP,EAAM,MAAO,EAAK,CACzC,CAAC,EAED,eAAeO,EAAqBC,EAAaC,EAAa,CAC5DC,EAAa,EAAI,EACjBC,EAAiB,EAAK,EAEtB,KAAM,CAAE,KAAAC,EAAM,UAAAC,GAAc,MAAMzB,EAAYoB,EAAalB,EAAMC,CAAO,EAGxE,GAFAmB,EAAa,EAAK,EAEd,EAACE,GAAA,MAAAA,EAAM,QAAQ,CACjBE,EACE,2EACA,SACN,EACI,MACD,CAEDb,EAAW,UAAU,OAAO,iBAAiB,EAC7CN,EAAaiB,CAAI,EACjBlB,EAAQ,QAAO,EAEXqB,EAAWF,CAAS,EACtBC,EACE,6DACA,OACN,EAEIX,EAAW,UAAU,OAAO,iBAAiB,EAE1CM,GAAaO,GACpB,CAEA,SAASN,EAAaO,EAAO,CAC3Bf,EAAO,UAAU,OAAO,YAAae,CAAK,CAC5C,CAEA,SAASX,GAAkB,CACzB,OAAQL,EAAW,UAAY,EACjC,CAEA,SAASc,EAAWF,EAAW,CAE7B,OADmB,KAAK,KAAKA,EAAYtB,CAAO,IAC1BD,CACxB,CAEA,SAASwB,EAAiBI,EAASC,EAAO,CACxCC,EAAS,KAAK,CACZ,QAAAF,EACA,SAAU,WACV,gBAAiBC,EACjB,aAAc,UACd,YAAa,IACjB,CAAG,CACH,CAEA,SAASH,GAAa,OACpB,MAAMK,IACJC,EAAA,SAAS,cAAc,IAAI,IAA3B,YAAAA,EAA8B,wBAAwB,SAAU,EAClE,OAAO,SAAS,CACd,IAAKD,EAAa,EAAI,GACtB,SAAU,QACd,CAAG,CACH,CAEA,SAASV,EAAiBM,EAAO,CAC/Bd,EAAW,UAAU,OAAO,kBAAmB,CAACc,CAAK,CACvD"}